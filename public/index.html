<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Dashboard Internal Rusun</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-950 text-white">

<div class="p-6">
  <h1 class="text-2xl font-bold mb-4">Dashboard Internal</h1>

  <div class="grid grid-cols-4 gap-4 mb-6">
    <div class="bg-slate-800 p-4 rounded">Penghuni<br><b id="tp">0</b></div>
    <div class="bg-slate-800 p-4 rounded">Unit Terisi<br><b id="ut">0</b></div>
    <div class="bg-slate-800 p-4 rounded">Total Bayar<br><b id="tb">Rp 0</b></div>
    <div class="bg-slate-800 p-4 rounded">Total Tunggakan<br><b id="tt">Rp 0</b></div>
  </div>

  <table class="w-full text-sm">
    <thead>
      <tr class="border-b border-slate-700">
        <th>Unit</th><th>Nama</th><th>No Telp</th><th>Status</th><th>Total Bayar</th><th>Total Tunggakan</th>
      </tr>
    </thead>
    <tbody id="tbody"></tbody>
  </table>
</div>

<script>
fetch("/api/data?action=internal&key=rusun2026")
.then(r=>r.json())
.then(j=>{
  const d = j.data;

  tp.innerText = d.totalPenghuni;
  ut.innerText = d.unitTerisi;
  tb.innerText = "Rp " + Number(d.totalPembayaran||0).toLocaleString("id-ID");
  tt.innerText = "Rp " + Number(d.totalTunggakan||0).toLocaleString("id-ID");

  let html="";
  d.listPenghuni.forEach(p=>{
    const ph = p.penghuni || {};

    html+=`<tr class="border-b border-slate-800">
      <td>${(p.unit||"").toUpperCase()}</td>
      <td>${ph.nama || ""}</td>
      <td>${ph.notelp || ""}</td>
      <td>${ph.kondisiunit || ""}</td>
      <td>Rp ${Number(p.pembayaran||0).toLocaleString("id-ID")}</td>
      <td>Rp ${Number(p.tunggakan||0).toLocaleString("id-ID")}</td>
    </tr>`;
  });

  tbody.innerHTML = html;
});
</script>

</body>
</html>


